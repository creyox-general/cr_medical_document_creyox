<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="external_layout_standard_custom">
        <t t-if="not o" t-set="o" t-value="doc"/>

        <t t-if="not company">
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>

        <!-- Custom Header -->
        <div class="page-header" style="margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
            <table width="100%" style="font-family: Arial, sans-serif; font-size: 12px; direction: ltr;">
                <tr>
                    <!-- Left column: Logo (like the eye icon in the image) -->
                    <td width="30%" style="vertical-align: top;">
                        <img t-if="company.logo"
                             t-att-src="'data:image/png;base64,%s' % company.logo.decode('utf-8')"
                             style="max-width: 100px; max-height: 60px; object-fit: contain;"
                             alt="Company Logo"/>
                        <!-- Fallback if no logo -->
                        <t t-else="">
                            <div style="width: 100px; height: 60px; background-color: #f0f0f0; text-align: center; line-height: 60px;">
                                Logo
                            </div>
                        </t>
                    </td>
                    <!-- Right column: Company details (dynamic fetch from res.company) -->
                    <td width="70%" style="vertical-align: top; text-align: right; padding-right: 20px;">
                        <div style="text-align: right;">
                            <!-- Company Name (e.g., "Hamarpea") -->
                            <h2 t-field="company.name" t-options='{"widget": "text"}'
                                style="margin: 0; font-size: 18px; color: #333;"/>

                            <!-- Custom title/description (e.g., "Professor Benjamin Fox, Pulmonologist, Director...") -->
                            <!-- Add this as a custom field in res.company if needed, or hardcode/adjust -->
                            <p style="margin: 5px 0; font-size: 12px; color: #666;">
                                Professor Benjamin Fox
                                <br/>
                                Pulmonologist, Director of the Pulmonary Institute, Shamir Medical Center
                            </p>

                            <!-- Address (P.O. Box, clinic location) -->
                            <p t-if="company.street" style="margin: 5px 0; font-size: 11px;">
                                <t t-esc="company.street"/>
                                <t t-if="company.street2">,
                                    <t t-esc="company.street2"/>
                                </t>
                                <br/>
                                P.O. Box
                                <t t-esc="company.zip"/>
                                <t t-esc="company.city"/>,
                                <t t-esc="company.country_id.name"/>
                            </p>

                            <!-- Contact info (phone, fax, mobile, email) -->
                            <p style="margin: 5px 0; font-size: 11px;">
                                Tel:
                                <t t-esc="company.phone"/>
                                | Fax:
                                <t t-esc="company.fax"/>
                                <br/>
                                Mobile:
                                <t t-if="company.phone">+
                                    <t t-esc="company.phone"/>
                                </t>
                                | Email:
                                <a t-att-href="'mailto:' + company.email" t-esc="company.email"/>
                            </p>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <!-- Content Body -->
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}"
             t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % company.layout_background_image.decode('utf-8') if company.layout_background_image and company.layout_background == 'Custom' else '/base/static/img/bg_background_template.jpg' if company.layout_background == 'Geometric' else ''}});"
             t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id"
             t-att-data-oe-lang="o and o.env.context.get('lang')">
            <div>
                <!-- Prevent cropping -->
                <t t-call="web.address_layout"/>
            </div>
            <t t-out="0"/>
        </div>
    </template>
</odoo>